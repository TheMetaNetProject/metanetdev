#
# MetaNet extraction system configuration
#
# This file contains settings, which can be copied and customized prior to
# use.  There are three levels of section processing:
#
# - DEFAULT: this is read by everything
# - program, .e.g [m4detect]: this is read by the program
# - mode, e.g. [m4detect.poverty]: this is read when --mode poverty is used at runtime
#
# Note that specific sections inherit the parameter settings in the general
# sections, and can override settings as well.
#
# Parameters have the following form, where items in the []'s are optional:
#
#   [component.]variable[.language]:value
#
# The [component.] is used just to organize the parameters, providing namespaces
# for the variables.  [.language] can be used to specify per-language overrides
# for the variable.
#
# This format also allows for interpolation, i.e. %(foo) is replaced by the value
# of foo as specified in the file, via foo=value.
# 

# system-wide defaults
[DEFAULT]
sbs.seed_fn.en:%(seedsdir)s/en/seeds
sbs.seed_fn.es:%(seedsdir)s/es/seeds
sbs.seed_fn.ru:%(seedsdir)s/ru/seeds
seedsdir=/u/metanet/extraction/seeds
cms.cxnpatternfile.en:%(mnrdfdir)s/en/latest/cache/cxn_patterns_en.txt
cms.cxnpatternfile.es:%(mnrdfdir)s/es/latest/cache/cxn_patterns_es.txt
cms.cxnpatternfile.ru:%(mnrdfdir)s/ru/latest/cache/cxn_patterns_ru.txt
cms.cxnpatternfile.fa:%(mnrdfdir)s/fa/latest/cache/cxn_patterns_fa.txt
cms.metarcfile.en:%(mnrdfdir)s/en/latest/cache/metarcs_en.txt
cms.metarcfile.es:%(mnrdfdir)s/es/latest/cache/metarcs_es.txt
cms.metarcfile.ru:%(mnrdfdir)s/ru/latest/cache/metarcs_ru.txt
cms.metarcfile.fa:%(mnrdfdir)s/fa/latest/cache/metarcs_fa.txt
mrdatadir.en:%(mnrdfdir)s/en/latest
mrdatadir.es:%(mnrdfdir)s/es/latest
mrdatadir.ru:%(mnrdfdir)s/ru/latest
mrdatadir.fa:%(mnrdfdir)s/fa/latest
mnrdfdir=/u/metanet/repository/rdf
framenetdatadir:/u/metanet/repository/framenet
wiktionarydatadir:/u/metanet/repository/wiktionary
persianwordformsdatadir:/u/metanet/repository/persianwordforms
# cnms.sourcelimit
#   max source concepts to include in GMR for a given source word
cnms.sourcelimit:2
# cnms.secondaryminscore
#   the mapping score that must be exceeded for a second source
#   concept to be included
cnms.secondaryminscore:0.2

# default m4detect operational mode (with no --mode specified)
[m4detect]
# filter specification, any combination of the following can be
# specified:
#   targetconceptgroups,targetconcepts,targetfamilies,targetframes,
#   sourceconcepts,sourcefamilies,sourceframes
targetconcepts:POVERTY,TAXATION,WEALTH,DEMOCRACY,
    ELECTIONS,GOVERNMENT,BUREAUCRACY
# extractionphases
#   extractors to run, and the order.  Options are:
#   CMS,SBS,LMS2
extractionphases:CMS
extractionphases.fa:LMS2,CMS
# mappingphases
#   mapping (frame to concept) phases to run.  Note that CNMS
#   is used by the CMS system, for lemma to frame mapping.
#   Options are: CNMS,DSMS,DLS
mappingphases:CNMS
# scorethreshold
#   the metaphorcity score that must be exceeded for an LM to
#   be included in IARPA's output XML
scorethreshold:0.4
# cms.maxsentlength
#   maximum length in words. Sentences longer than this will be
#   skipped.
cms.maxsentlength:256
# cms.disablewcaching
#   if true, it will regenerate lists of search words (retrieved
#   from RDF) every time the extractor is run.  Should be set to
#   false for parallel processing jobs.
cms.disablewcaching:True
# cms.excludedfamilies
#   Frame families that are excluded as possible source domains
#   this is in addition to the Excluded families family which is
#   always excluded.
cms.excludedfamilies:Governance schemas,Democracy schemas,
    Economic Inequality schemas
# cnms.expansiontypes
#   strategies to use to expand word coverage in the lemma to frame
#   lookup. Options are wn,wik,fn.
cnms.expansiontypes:wn,wik,fn
# cnms.disableclosestframe
#   if true, the system will not use frames specified in the
#   closest framenet frame field to expand lexical coverage
#   note that this is a separate system from the fn expansiontype
#   above.
cnms.disableclosestframe:False

# moving entity extraction mode: provided here as an example
#   to use this mode, run m4detect with --mode movinge
[m4detect.movinge]
# overrides targetconcepts to nothing (clears the default)
targetconcepts:
sourcefamilies:Moving entity frames
extractionphases:CMS
mappingphases:CNMS
# override m4detect defaults
cms.disablewcaching:False
cms.excludedfamilies:
cnms.expansiontypes:
cnms.disableclosestframe:True

[m4detect.poverty]
targetconcepts:POVERTY
extractionphases:CMS
extractionphases.fa:CMS
mappingphases:CNMS
scorethreshold:0.4
scorethreshold.ru:0.4
cms.maxsentlength:256
cms.disablewcaching:False
cms.excludedfamilies:Governance frames,Democracy frames,
    Economic Inequality frames
cnms.expansiontypes:
cnms.disableclosestframe:True

[m4detect.demotax]
targetconcepts:DEMOCRACY,TAXATION
extractionphases:CMS
extractionphases.fa:CMS
mappingphases:CNMS
scorethreshold:0.4
scorethreshold.ru:0.4
cms.maxsentlength:256
cms.disablewcaching:False
cms.excludedfamilies:Governance frames,Democracy frames,
    Economic Inequality frames
cnms.expansiontypes:
cnms.disableclosestframe:True

# for the cyclical testing runs -- this mode is used by the
# daily extraction runs on the goldstandard data
[m4detect.testcycle]
targetconcepts:POVERTY,WEALTH,TAXATION,GOVERNMENT,BUREAUCRACY,DEMOCRACY,ELECTIONS
extractionphases:CMS
extractionphases.fa:CMS
mappingphases:CNMS
scorethreshold:0.4
scorethreshold.ru:0.4
cms.maxsentlength:256
cms.disablewcaching:True
cms.excludedfamilies:Governance frames,Democracy frames,
    Economic Inequality frames
cnms.expansiontypes:
cnms.disableclosestframe:True

# mode for pre-processing large corpora; i.e. runs tagging, lemmatizing
# dependencying parsing.  Then m4detect is run in this mode, it will
# not run metaphor extraction.
#
[m4detect.pre]
targetconcepts:
extractionphases:PRE
mappingphases:
cnms.expansiontypes:
defaultresultprefix:pre_
cms.excludedfamilies:
cnms.targetconceptranking:

[fastdbimport]
# scorethreshold
#   the metaphoricity score that must be exceeded for an LM to be
#   included in the GMR.  This does not affect MetaNet's MR.
scorethreshold.fa:0.4999
scorethreshold.en:0.7199
scorethreshold.ru:0.2999
scorethreshold.es:0.7199
# excludeextractors
#   specifies that LMs extracted by the extraction systems listed
#   should not be imported
excludeextractors.es:SBS
excludeextractors.en:SBS




# ----------------------------------------------------------------
#
# ARCHIVE: the mode settings below are for posterity
#
#


# gmr generation mode for m4detect on general concepts
[m4detect.gmr.general]
targetconceptgroups:DEMOCRACY,ECONOMIC INEQUALITY,GOVERNANCE
targetconcepts:
casemode:general
extractionphases.en:SBS,CMS
extractionphases.es:SBS,CMS
extractionphases.ru:SBS,CMS
extractionphases.fa:LMS2,CMS
mappingphases:CNMS
scorethreshold:0.4
cnms.targetconceptranking:DEMOCRACY,ELECTIONS,BUREAUCRACY,POVERTY,
    WEALTH,TAXATION,GOVERNMENT
cnms.expansiontypes:wn,wik,fn
cnms.expansionscorescale:0.5
cms.excludedfamilies:Governance schemas,Democracy schemas,
    Economic Inequality schemas

# gmr generation mode for m4detect on case study concepts
[m4detect.gmr.case]
targetconceptgroups:GUN OVERSIGHT
targetconcepts:
casemode:case
mappingphases:CNMS
scorethreshold:0.4
cms.excludedfamilies:Governance schemas,Democracy schemas,
    Economic Inequality schemas,Gun debate
cnms.targetconceptranking:CONTROL OF GUNS,GUN RIGHTS,GUNS
cnms.expansiontypes:wn,wik,fn
cnms.expansionscorescale:0.5

# mode for testing SBS
[m4detect.sbs]
targetconcepts:POVERTY,TAXATION,WEALTH,DEMOCRACY,
    ELECTIONS,GOVERNMENT,BUREAUCRACY
extractionphases:SBS
scorethreshold:-0.25
scorethreshold.ru:-9999.0

[m4detect.gmr.lms2]
extractionphases.fa:LMS2
mappingphases:CNMS

[m4detect.lms2]
extractionphases.fa:LMS2

[m4mapping]
mappingsystems:CNMS,DSMS
secondarymappingthreshold:0.1
cnms.targetconceptranking:DEMOCRACY,ELECTIONS,BUREAUCRACY,POVERTY,
    WEALTH,TAXATION,GOVERNMENT
cnms.expansiontypes:wn,wik,fn
cnms.expansionscorescale:0.5
dsms.defaultrank:2
dsms.defaultscore:0.10

[gendemodata]
gmrdb.socket:/tmp/mysql.sock
gmrdb.username:readonly_user
gmrdb.password:readme
mndb.socket:/tmp/mysql.sock
mndb.username:readonly_user
mndb.password:readme

[makesubcorpus.poverty]
targetconcepts:POVERTY
extractionphases:CMS
extractionphases.fa:CMS
mappingphases:CNMS
scorethreshold:0.4
scorethreshold.ru:0.4
cms.maxsentlength:256
cms.disablewcaching:False
cms.excludedfamilies:Governance frames,Democracy frames,
    Economic Inequality frames
cnms.expansiontypes:
cnms.disableclosestframe:True

